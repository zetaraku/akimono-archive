<HTML><HEAD>
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<META name="ROBOTS" content="NOINDEX,NOFOLLOW">
<STYLE type="text/css">
<!--
A {font-weight: bold; text-decoration:none}
A:hover {text-decoration:underline; position:relative;top:1pt;}
BODY,TR,TD,TH {font: 10.5pt/130% MS UI Gothic;}
BIG {font: bold 10.5pt MS UI Gothic;color:#996644;}
SPAN {font: bold 10.5pt MS UI Gothic;color:#6644bb;}
hr {color:#666666;}
H1,H2 {font: bold 12pt "MS UI Gothic";color:#659d40;background-color: #F0FFFA;
 width=100%;border-left: 10px solid #AACCB0;
 border-bottom: 2px solid #AACCB0;padding-left: 10px;}
.b { border: 1px inset #45AA54;background-color: #F0FFFA;padding: 1px 10px;}
.d {background-color: #fcfcfc;border: 1px solid #DDC0BA;padding: 3px;}
h3, h4, h5 {color: #659d40;border-left: 5px solid #c0ffcc;
	border-bottom: 1px solid #c0ffcc;padding-left: 10px;}
dt {background-color: #f8f8f8;width: 100%;
	border-left: 10px solid #999999;border-bottom: 2px solid #cccccc;
	padding-left: 10px;margin: 4px;}
p.display, blockquote.display, pre.display {
	background-color: #fcfcfc;border: 2px solid #d0ddd9;padding: 3px;}
code.filename_del {border-bottom: 1pt solid #000000;}
-->
</STYLE>
<TITLE>商人物語 マニュアル</TITLE>
</HEAD>
<body background="wall.png" bgcolor=#FFFFFF text=#000000 link=#208c5f vlink=#208c5f alink=#ff0000>
<br><a href="index.html">[トップ]</a> > 改造編 > <SPAN>データ・変数仕様</SPAN>
<hr noshade size=1>
<TABLE><TR><TD>
<IMG ALT="お手伝い" WIDTH="48" HEIGHT="48" BORDER="0" SRC="kaoguide.png">
<TD class="b">ここでは，商人物語で使用される<SPAN>データや変数の仕様</SPAN>について解説します（代表的なもの）。<br>
なお，商人物語独自のデータや変数は，<SPAN>この色で強調表示</SPAN>してあります。
</TR></TABLE>
<ul><li>
<a href="#1">各種データ変数表</a>
</li>
<li>
<a href="#2">$DTpeople</a>
</li>
<li>
<a href="#3">$DTlasttime</a>
</li>
<li>
<a href="#4">$DTTaxrate</a>
</li>
<li>
<a href="#5">$DTState</a>
</li>
<li>
<a href="#6">%DTEvent</a>
</li>
<li>
<a href="#7">$DTtown</a>
</li>
<li>
<a href="#8">@SHOWCASE_COST</a>
</li>
<li>
<a href="#9">$MAX_MONEY</a>
</li>
<li>
<a href="#10">@ITEMTYPE</a>
</li>
<li>
<a href="#11">@DTwholestore</a>
</li>
<li>
<a href="#12">$DT</a>
<ul><li>
<a href="#13">id</a>
</li>
<li>
<a href="#14">lastlogin</a>
</li>
<li>
<a href="#15">name</a>
</li>
<li>
<a href="#16">shopname</a>
</li>
<li>
<a href="#17">pass</a>
</li>
<li>
<a href="#18">money</a>
</li>
<li>
<a href="#19">time</a>
</li>
<li>
<a href="#20">rank</a>
</li>
<li>
<a href="#21">showcasecount</a>
</li>
<li>
<a href="#22">comment</a>
</li>
<li>
<a href="#23">saleyesterday</a>
</li>
<li>
<a href="#24">saletoday</a>
</li>
<li>
<a href="#25">costyesterday</a>
</li>
<li>
<a href="#26">rankingcount</a>
</li>
<li>
<a href="#27">remoteaddr</a>
</li>
<li>
<a href="#28">dignity</a>
</li>
<li>
<a href="#29">rankingyesterday</a>
</li>
<li>
<a href="#30">paytoday</a>
</li>
<li>
<a href="#31">payyesterday</a>
</li>
<li>
<a href="#32">profitstock</a>
</li>
<li>
<a href="#33">taxmode</a>
</li>
<li>
<a href="#34">costtoday</a>
</li>
<li>
<a href="#35">ticket</a>
</li>
<li>
<a href="#36">taxyesterday</a>
</li>
<li>
<a href="#37">trush</a>
</li>
<li>
<a href="#38">taxtoday</a>
</li>
<li>
<a href="#39">guild</a>
</li>
<li>
<a href="#40">blocklogin</a>
</li>
<li>
<a href="#41">nocheckip</a>
</li>
<li>
<a href="#42">foundation</a>
</li>
<li>
<a href="#43">job</a>
</li>
<li>
<a href="#44">icon</a>
</li>
<li>
<a href="#45">showcase</a>
</li>
<li>
<a href="#46">price</a>
</li>
<li>
<a href="#47">item</a>
</li>
<li>
<a href="#48">itemyesterday</a>
</li>
<li>
<a href="#49">itemtoday</a>
</li>
<li>
<a href="#50">exp</a>
</li>
<li>
<a href="#51">user</a>
</li>
<li>
<a href="#52">point</a>
</li></ul></li>
<li>
<a href="#53">@DT</a>
</li>
<li>
<a href="#54">$DTS</a>
</li>
<li>
<a href="#55">@ITEM</a>
<ul><li>
<a href="#56">sort</a>
</li>
<li>
<a href="#57">type</a>
</li>
<li>
<a href="#58">price</a>
</li>
<li>
<a href="#59">cost</a>
</li>
<li>
<a href="#60">pricebase</a>
</li>
<li>
<a href="#61">pricehalf</a>
</li>
<li>
<a href="#62">limit</a>
</li>
<li>
<a href="#63">wslimit</a>
</li>
<li>
<a href="#64">popular</a>
</li>
<li>
<a href="#65">plus</a>
</li>
<li>
<a href="#66">code</a>
</li>
<li>
<a href="#67">scale</a>
</li>
<li>
<a href="#68">name</a>
</li>
<li>
<a href="#69">info</a>
</li>
<li>
<a href="#70">point</a>
</li>
<li>
<a href="#71">param</a>
</li></ul></li>
<li>
<a href="#72">$USE</a>
<ul><li>
<a href="#73">code</a>
</li>
<li>
<a href="#74">no</a>
</li>
<li>
<a href="#75">itemno</a>
</li>
<li>
<a href="#76">name</a>
</li>
<li>
<a href="#77">info</a>
</li>
<li>
<a href="#78">scale</a>
</li>
<li>
<a href="#79">action</a>
</li>
<li>
<a href="#80">money</a>
</li>
<li>
<a href="#81">time</a>
</li>
<li>
<a href="#82">exptime</a>
</li>
<li>
<a href="#83">exp</a>
</li>
<li>
<a href="#84">needexp</a>
</li>
<li>
<a href="#85">arg</a>
<ul><li>
<a href="#86">target</a>
</li>
<li>
<a href="#87">targetidx</a>
</li>
<li>
<a href="#88">count</a>
</li>
<li>
<a href="#89">message</a>
</li></ul></li>
<li>
<a href="#90">use</a>
<ul><li>
<a href="#91">no</a>
</li>
<li>
<a href="#92">count</a>
</li>
<li>
<a href="#93">proba</a>
</li>
<li>
<a href="#94">message</a>
</li></ul></li>
<li>
<a href="#95">result</a>
<ul><li>
<a href="#96">create</a>
<ul><li>
<a href="#97">no</a>
</li>
<li>
<a href="#98">count</a>
</li>
<li>
<a href="#99">proba</a>
</li>
<li>
<a href="#100">message</a>
</li></ul></li>
<li>
<a href="#101">function</a>
</li>
<li>
<a href="#102">message</a>
<ul><li>
<a href="#103">resultok</a>
</li>
<li>
<a href="#104">resultng</a>
</li></ul></li></ul></li></ul></li>
<li>
<a href="#105">$STATE</a>
<ul><li>
<a href="#106">leader</a>
</li>
<li>
<a href="#107">money</a>
</li>
<li>
<a href="#108">in</a>
</li>
<li>
<a href="#109">out</a>
</li>
<li>
<a href="#110">develop</a>
</li>
<li>
<a href="#111">devem</a>
</li>
<li>
<a href="#112">safety</a>
</li>
<li>
<a href="#113">safem</a>
</li>
<li>
<a href="#114">army</a>
</li>
<li>
<a href="#115">robina</a>
</li>
<li>
<a href="#116">robinb</a>
</li></ul></li></ul><h2 class="section"><small><a href="#top">△</a></small> <a name="1" id="1">各種データ変数表</a></h2>
<p>スクリプト内で使用している代表的な変数の内容を記します。<br>
具体的な使用方法は <code class="filename">inc-item-data.cgi</code> の記述などを参考にしてください。</p>
<p>※$DT 構造体以外は参照のみです。変更した場合の動作保証は出来ません。<br>
また，$DT 構造体の変更も，カスタマイズ可能範囲外で行った場合は変更が反映されない可能性があります。</p>
<h2 class="section"><small><a href="#top">△</a></small> <a name="2" id="2">$DTpeople</a></h2>
<p>人口(表示する場合は 1/10 に丸める)</p>
<h2 class="section"><small><a href="#top">△</a></small> <a name="3" id="3">$DTlasttime</a></h2>
<p>最終更新時刻(GMT)</p>
<h2 class="section"><small><a href="#top">△</a></small> <a name="4" id="4">$DTTaxrate</a></h2>
<p><SPAN>街の税率</SPAN></p>
<h2 class="section"><small><a href="#top">△</a></small> <a name="5" id="5">$DTState</a></h2>
<p><SPAN>街の施政状況データです</SPAN>。<br>
<a href="#105">$STATE</a> 構造体に展開されるので，この変数を直接直接操作せずに，<a href="#105">$STATE</a> の中身を操作してください。</p>
<h2 class="section"><small><a href="#top">△</a></small> <a name="6" id="6">%DTEvent</a></h2>
<p>現在発動中のイベント情報の連想配列</p>
<p>この連想配列を操作することで自由にイベントの開始/停止を行えます。</p>
<pre class="display">
%DTEvent=(イベントコード,終了時刻,イベントコード,終了時刻,...);
</pre><h2 class="section"><small><a href="#top">△</a></small> <a name="7" id="7">$DTtown</a></h2>
<p>街全体用データの連想配列のリファレンスです。</p>
<p>利用の際には，この変数を直接操作せずに，
<code>GetTownData('任意のキー')</code> と <code>SetTownData('任意のキー','任意の値')</code> を介してください。</p>
<p>'任意のキー'と'任意の値' は，数値もしくは文字列であれば特に制限なく利用可能です。<br>
カンマ(,)やタブ(\t)，改行(\n)なども問題なく利用できます。
ただし，配列や連想配列，リファレンスなどは利用できません。</p>
<p>利用されなくなったキーと値は，<code>SetTownData('任意のキー','')</code> として削除してください。
削除されない限り，保持され続けます。</p>
<p>保持できるデータ量やデータ数に上限はありませんが，
<code class="filename">data.cgi</code> に追加されていきますので，
サーバへの負荷と相談しながら利用してください。</p>
<h2 class="section"><small><a href="#top">△</a></small> <a name="8" id="8">@SHOWCASE_COST</a></h2>
<p>陳列棚維持費配列</p>
<p>添字 0~7 が陳列棚 1~8 個に対応</p>
<pre class="display">
$SHOWCASE_COST[0];
$SHOWCASE_COST[1];
$SHOWCASE_COST[2];
$SHOWCASE_COST[3];
</pre><h2 class="section"><small><a href="#top">△</a></small> <a name="9" id="9">$MAX_MONEY</a></h2>
<p>最大資金</p>
<h2 class="section"><small><a href="#top">△</a></small> <a name="10" id="10">@ITEMTYPE</a></h2>
<p>商品分類名配列</p>
<p>$ITEM[?]->{type}に対応します。</p>
<pre class="display">
$ITEMTYPE[$ITEM[1]-&gt;{type}];
</pre><h2 class="section"><small><a href="#top">△</a></small> <a name="11" id="11">@DTwholestore</a></h2>
<p>問屋在庫</p>
<p>$DTwholestore[0~]が商品番号 1~に対応します。</p>
<pre class="display">
$DTwholestore[0];
$DTwholestore[1];
$DTwholestore[2];
$DTwholestore[3];
</pre><h2 class="section"><small><a href="#top">△</a></small> <a name="12" id="12">$DT</a></h2>
<p>自店データ構造体リファレンス</p>
<p>連想配列へのリファレンスです。$DT->{キー}でデータへアクセスできます。キーは以下の通り。</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="13" id="13">id</a></h3>
<p>店舗個別の番号</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="14" id="14">lastlogin</a></h3>
<p>最終作業時刻(GMT:ログインのみでは更新されません)</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="15" id="15">name</a></h3>
<p>ユーザ名</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="16" id="16">shopname</a></h3>
<p>店舗名(SJIS)</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="17" id="17">pass</a></h3>
<p>パスワード(<SPAN>標準で暗号化される</SPAN>)</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="18" id="18">money</a></h3>
<p>資金</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="19" id="19">time</a></h3>
<p>time()-$DT->{time}==行動可能時間(マイナスなら待時間)</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="20" id="20">rank</a></h3>
<p>人気 0 ～ 10000 (表示は 1/100 で%表記)</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="21" id="21">showcasecount</a></h3>
<p>陳列棚数</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="22" id="22">comment</a></h3>
<p>コメント文字列(SJIS)</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="23" id="23">saleyesterday</a></h3>
<p>昨日売上金額</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="24" id="24">saletoday</a></h3>
<p>本日売上金額</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="25" id="25">costyesterday</a></h3>
<p>昨日の維持費額</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="26" id="26">rankingcount</a></h3>
<p>トップの回数</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="27" id="27">remoteaddr</a></h3>
<p>最後にアクセスしたときの IP アドレス</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="28" id="28">dignity</a></h3>
<p><SPAN>爵位経験値</SPAN></p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="29" id="29">rankingyesterday</a></h3>
<p>昨日の順位</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="30" id="30">paytoday</a></h3>
<p>本日の支払総額</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="31" id="31">payyesterday</a></h3>
<p>昨日の支払総額</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="32" id="32">profitstock</a></h3>
<p>過去数日間の純利益平均</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="33" id="33">taxmode</a></h3>
<p><SPAN>倍税・免税の状態</SPAN></p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="34" id="34">costtoday</a></h3>
<p>本日の維持費額(陳列棚は含まない)</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="35" id="35">ticket</a></h3>
<p><SPAN>スライム券の購入状況</SPAN></p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="36" id="36">taxyesterday</a></h3>
<p>昨日の納税額</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="37" id="37">trush</a></h3>
<p><SPAN>ごみの量</SPAN></p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="38" id="38">taxtoday</a></h3>
<p>今期納税済みの金額</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="39" id="39">guild</a></h3>
<p>所属ギルドコード</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="40" id="40">blocklogin</a></h3>
<p>アクセス制限＆コメント</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="41" id="41">nocheckip</a></h3>
<p>アクセス自動制限の有効無効状態 null=有効 1:無効</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="42" id="42">foundation</a></h3>
<p>創業日時刻(GMT)</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="43" id="43">job</a></h3>
<p>職業コード</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="44" id="44">icon</a></h3>
<p>アイコンコード</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="45" id="45">showcase</a></h3>
<p>陳列棚配列へのリファレンス</p>
<p>$DT->{showcase}[0 ～ showcasecount-1]で，各陳列棚に陳列されている商品の番号が入っている。
値が 0 の場合は未陳列。次の price と対になっている。</p>
<pre class="display">
$DT-&gt;{showcase}[0];
$DT-&gt;{showcase}[1];
$DT-&gt;{showcase}[2];
</pre><h3 class="subsection"><small><a href="#top">△</a></small> <a name="46" id="46">price</a></h3>
<p>陳列棚配列へのリファレンス</p>
<p>$DT->{price}[0 ～ showcasecount-1]で，各陳列棚に陳列されている商品の売値が入っている。
前の showcase と対になっている。</p>
<pre class="display">
$DT-&gt;{price}[0];
$DT-&gt;{price}[1];
$DT-&gt;{price}[2];
</pre><h3 class="subsection"><small><a href="#top">△</a></small> <a name="47" id="47">item</a></h3>
<p>商品在庫配列へのリファレンス</p>
<p>$DT->{item}[商品番号-1] へ商品番号の商品の在庫数が入っている。</p>
<pre class="display">
$DT-&gt;{item}[0];
$DT-&gt;{item}[1];
$DT-&gt;{item}[2];
$DT-&gt;{item}[3];
</pre><h3 class="subsection"><small><a href="#top">△</a></small> <a name="48" id="48">itemyesterday</a></h3>
<p>商品昨日売上数の連想配列へのリファレンス</p>
<p>$DT->{itemyesterday}{商品番号}に昨日の売上数が入っている。</p>
<pre class="display">
$DT-&gt;{itemyesterday}{1};
$DT-&gt;{itemyesterday}{2};
$DT-&gt;{itemyesterday}{3};
$DT-&gt;{itemyesterday}{4};
</pre><h3 class="subsection"><small><a href="#top">△</a></small> <a name="49" id="49">itemtoday</a></h3>
<p>商品本日売上数の連想配列へのリファレンス</p>
<p>$DT->{itemtoday}{商品番号}に本日の売上数が入っている。</p>
<pre class="display">
$DT-&gt;{itemtoday}{1};
$DT-&gt;{itemtoday}{2};
$DT-&gt;{itemtoday}{3};
$DT-&gt;{itemtoday}{4};
</pre><h3 class="subsection"><small><a href="#top">△</a></small> <a name="50" id="50">exp</a></h3>
<p>商品熟練度の連想配列へのリファレンス</p>
<p>$DT->{exp}{商品番号}に商品毎の熟練度(0~1000)が入っている。 1/10 で表示する。</p>
<pre class="display">
$DT-&gt;{exp}{1};
$DT-&gt;{exp}{2};
$DT-&gt;{exp}{3};
$DT-&gt;{exp}{4};
</pre><h3 class="subsection"><small><a href="#top">△</a></small> <a name="51" id="51">user</a></h3>
<p>独自データ格納用連想配列へのリファレンス</p>
<p>$DT->{user}->{独自キー}に独自のデータを保存できる。</p>
<p>ただし，独自キーとその設定値には「, : およびコントロールキャラクタ(\x00-\x1f) 」は使用できない。
また，「 _so_ 」から始まるキーはシステム予約なので使用できない。</p>
<pre class="display">
$DT-&gt;{user}-&gt;{hp};
$DT-&gt;{user}-&gt;{weapon};
$DT-&gt;{user}-&gt;{memo};
</pre><h3 class="subsection"><small><a href="#top">△</a></small> <a name="52" id="52">point</a></h3>
<p>ランキングに使用する点数(参照のみ)</p>
<h2 class="section"><small><a href="#top">△</a></small> <a name="53" id="53">@DT</a></h2>
<p>全店舗データ構造体リファレンス配列</p>
<p>構造体は$DT と同じです。</p>
<h2 class="section"><small><a href="#top">△</a></small> <a name="54" id="54">$DTS</a></h2>
<p>対象店舗データ構造体リファレンス</p>
<p>商品使用時などに対象店舗(arg target)がある場合に有効な変数。
その他，他店や市場からの仕入などにも利用。</p>
<p>$DTS が市場を指す場合は，$DTS->{_wholestore_} が定義されています。</p>
<h2 class="section"><small><a href="#top">△</a></small> <a name="55" id="55">@ITEM</a></h2>
<p>商品データ構造体リファレンス配列</p>
<p>$ITEM[商品番号]->{キー}で商品データへアクセスできます。 キーは以下の通り。</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="56" id="56">sort</a></h3>
<p>表示順</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="57" id="57">type</a></h3>
<p>商品分類($ITEMTYPE[type]で分類名取得可)</p>
<pre class="display">
$ITEM[1]-&gt;{type};
$ITEMTYPE[$ITEM[1]-&gt;{type}];
</pre><h3 class="subsection"><small><a href="#top">△</a></small> <a name="58" id="58">price</a></h3>
<p>標準価格</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="59" id="59">cost</a></h3>
<p>維持費</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="60" id="60">pricebase</a></h3>
<p>問屋価格=標準価格の基準個数</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="61" id="61">pricehalf</a></h3>
<p>問屋価格=標準価格/2 の個数</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="62" id="62">limit</a></h3>
<p>倉庫最大数</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="63" id="63">wslimit</a></h3>
<p>1 店舗分の問屋在庫</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="64" id="64">popular</a></h3>
<p>売れ行き率(popular 秒に 1 個売れる)</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="65" id="65">plus</a></h3>
<p>問屋補充率(plus 秒に 1 個補充)</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="66" id="66">code</a></h3>
<p>商品コードネーム</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="67" id="67">scale</a></h3>
<p>数え単位</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="68" id="68">name</a></h3>
<p>名称</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="69" id="69">info</a></h3>
<p>説明</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="70" id="70">point</a></h3>
<p>売却時の人気アップ度(1000==標準)</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="71" id="71">param</a></h3>
<p>独自パラメータ</p>
<h2 class="section"><small><a href="#top">△</a></small> <a name="72" id="72">$USE</a></h2>
<p>商品使用データ構造体リファレンス</p>
<p>$USE->{キー}で商品使用時データへアクセスできます。キーは以下の通り。</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="73" id="73">code</a></h3>
<p>対応する商品のコードネーム</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="74" id="74">no</a></h3>
<p>対応する商品別の固有番号</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="75" id="75">itemno</a></h3>
<p>対応する商品の番号</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="76" id="76">name</a></h3>
<p>使用名称</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="77" id="77">info</a></h3>
<p>説明</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="78" id="78">scale</a></h3>
<p>数え単位</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="79" id="79">action</a></h3>
<p>form の submit の表示</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="80" id="80">money</a></h3>
<p>費用</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="81" id="81">time</a></h3>
<p>使用時間</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="82" id="82">exptime</a></h3>
<p>熟練度 100%時の使用時間</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="83" id="83">exp</a></h3>
<p>熟練度上昇値</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="84" id="84">needexp</a></h3>
<p>必要熟練度</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="85" id="85">arg</a></h3>
<p>入力パラメータの連想配列リファレンス</p>
<blockquote><p><h4 class="sub2section"><a name="86" id="86">target</a></h4>
<p>target 店舗の ID(100~)</p>
<h4 class="sub2section"><a name="87" id="87">targetidx</a></h4>
<p>target 店舗の@DT に対する添字</p>
<h4 class="sub2section"><a name="88" id="88">count</a></h4>
<p>使用回数(未補正)</p>
<h4 class="sub2section"><a name="89" id="89">message</a></h4>
<p>コメント(補正済)</p></blockquote>
</p>
<pre class="display">
$USE-&gt;{arg}-&gt;{target};
$USE-&gt;{arg}-&gt;{targetidx};
$USE-&gt;{arg}-&gt;{count};
$USE-&gt;{arg}-&gt;{message};
</pre><h3 class="subsection"><small><a href="#top">△</a></small> <a name="90" id="90">use</a></h3>
<p>使用商品の連想配列リファレンスの配列リファレンス</p>
<p>$USE->{use}[0~]が使用商品の連想配列リファレンス。配列なので複数有り。その連想配列は以下の通り。</p>
<blockquote><p><h4 class="sub2section"><a name="91" id="91">no</a></h4>
<p>使用商品番号</p>
<h4 class="sub2section"><a name="92" id="92">count</a></h4>
<p>使用個数</p>
<h4 class="sub2section"><a name="93" id="93">proba</a></h4>
<p>消費確率 0(0%)~1000(100%)</p>
<h4 class="sub2section"><a name="94" id="94">message</a></h4>
<p>消費時の表示メッセージ</p></blockquote>
</p>
<pre class="display">
$USE-&gt;{use}[0]-&gt;{no};
$USE-&gt;{use}[0]-&gt;{count};
$USE-&gt;{use}[0]-&gt;{proba};
$USE-&gt;{use}[0]-&gt;{message};
</pre><h3 class="subsection"><small><a href="#top">△</a></small> <a name="95" id="95">result</a></h3>
<p>使用結果の連想配列リファレンス</p>
<blockquote><p><h4 class="sub2section"><a name="96" id="96">create</a></h4>
<p>取得商品の連想配列リファレンスの配列リファレンス</p>
<p>$USE->{result}->{create}[0~]が取得商品の連想配列リファレンス。
配列なので複数有り。その連想配列は以下の通り。</p>
<blockquote><p><h5 class="sub3section"><a name="97" id="97">no</a></h5>
<p>取得商品番号</p>
<h5 class="sub3section"><a name="98" id="98">count</a></h5>
<p>取得可能最大数</p>
<h5 class="sub3section"><a name="99" id="99">proba</a></h5>
<p>取得確率 0(0%)~1000(100%)</p>
<h5 class="sub3section"><a name="100" id="100">message</a></h5>
<p>取得時の表示メッセージ</p></blockquote>
</p>
<pre class="display">
$USE-&gt;{result}-&gt;{create}[0]-&gt;{no};
$USE-&gt;{result}-&gt;{create}[0]-&gt;{count};
$USE-&gt;{result}-&gt;{create}[0]-&gt;{proba};
$USE-&gt;{result}-&gt;{create}[0]-&gt;{message};
</pre><h4 class="sub2section"><a name="101" id="101">function</a></h4>
<p>呼び出す関数名</p>
<h4 class="sub2section"><a name="102" id="102">message</a></h4>
<p>結果表示用メッセージの連想配列リファレンス</p>
<blockquote><p><h5 class="sub3section"><a name="103" id="103">resultok</a></h5>
<p>商品取得時のメッセージ</p>
<h5 class="sub3section"><a name="104" id="104">resultng</a></h5>
<p>商品非取得時のメッセージ</p></blockquote>
</p>
<pre class="display">
$USE-&gt;{result}-&gt;{message}-&gt;{resultok};
$USE-&gt;{result}-&gt;{message}-&gt;{resultng};
</pre></blockquote>
</p>
<h2 class="section"><small><a href="#top">△</a></small> <a name="105" id="105">$STATE</a></h2>
<p><SPAN>施政状況構造体リファレンス</SPAN></p>
<p>連想配列へのリファレンスです。$STATE->{キー}でデータへアクセスできます。キーは以下の通り。</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="106" id="106">leader</a></h3>
<p><SPAN>領主となっているプレイヤーID</SPAN>。バルバロスのときは 0 または 空欄。</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="107" id="107">money</a></h3>
<p><SPAN>街資金</SPAN></p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="108" id="108">in</a></h3>
<p><SPAN>前期収入額</SPAN></p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="109" id="109">out</a></h3>
<p><SPAN>前期支出額</SPAN></p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="110" id="110">develop</a></h3>
<p><SPAN>開拓度数</SPAN>。表示するときは 1/100 に丸める。</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="111" id="111">devem</a></h3>
<p><SPAN>開拓対策費</SPAN></p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="112" id="112">safety</a></h3>
<p><SPAN>治安度数</SPAN>。表示するときは 1/100 に丸める。</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="113" id="113">safem</a></h3>
<p><SPAN>治安対策費</SPAN></p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="114" id="114">army</a></h3>
<p><SPAN>街の正規護衛兵力</SPAN></p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="115" id="115">robina</a></h3>
<p><SPAN>街の義勇兵力，または領主時のバルバロス兵力</SPAN>。維持費用が発生しない。</p>
<h3 class="subsection"><small><a href="#top">△</a></small> <a name="116" id="116">robinb</a></h3>
<p><SPAN>反乱時のバルバロス兵力</SPAN></p>
<hr noshade size=1>
<a href="index.html">[トップ]</a> > 改造編 > <SPAN>データ・変数仕様</SPAN>
<hr noshade size=1>
<br>
</body>
</html>
